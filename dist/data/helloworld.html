<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>learning html</title>
    <link rel="stylesheet" href="http://localhost:8000/firstPageCss" />
    <link rel="stylesheet" href="http://localhost:8000/getCss" />
    <link rel="stylesheet" href="http://localhost:8000/getLoginCss" />
    <style>
      table,
      tr,
      th,
      td {
        border: 1px solid black;
        text-align: center;
      }
      table {
        width: 50%;
      }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
      window.onload = function () {
        const signUpButton = document.getElementById("signUp");
        const signInButton = document.getElementById("signIn");
        const container = document.getElementById("container");

        signUpButton.addEventListener("click", () => {
          container.classList.add("right-panel-active");
        });

        signInButton.addEventListener("click", () => {
          container.classList.remove("right-panel-active");
        });
      };
      function signUp() {
        let data = $("#signUpForm").serialize();
        fetch("http://localhost:8000/signUp", {
          method: "POST",
          headers: {
            "Content-Type": "Application/x-www-form-urlencoded",
          },
          body: data,
        })
          .then((response) => response.json())
          .then((data) => {
            let uuid = data.uuid;
            console.log(uuid);
            moveToNextPage(uuid);
          });
      }
      function logIn() {
        let data = $("#logInForm").serialize();
        fetch("http://localhost:8000/login", {
          method: "POST",
          headers: {
            "Content-Type": "Application/x-www-form-urlencoded",
          },
          body: data,
        })
          .then((response) => response.json())
          .then((data) => {
            let uuid = data.uuid;
            console.log(uuid);
            moveToNextPage(uuid);
          });
      }

      function moveToNextPage(uuid) {
        let form = document.getElementById("movePageForm");
        let uuidSU = document.getElementById("uuidSU");
        uuidSU.value = uuid;
        form.submit();
      }
    </script>
  </head>
  <body bgcolor="#FFF5F5">
    <form
      hidden="true"
      id="movePageForm"
      method="POST"
      action="http://localhost:8000/mainPage"
      style="display: none"
    >
      <input id="uuidSU" name="uuid" type="hidden" value="Hello" />
    </form>
    <div class="container" id="container" style="left: 0%; top: 50%">
      <div class="form-container sign-up-container">
        <form id="signUpForm">
          <h1>Create Account</h1>
          <span>or use your email for registration</span>
          <input type="email" name="email" placeholder="Email" />
          <input type="password" name="password" placeholder="Password" />
          <button onclick="signUp()">Sign Up</button>
        </form>
      </div>
      <div class="form-container sign-in-container">
        <form id="logInForm">
          <h1>Sign in</h1>
          <span>or use your account</span>
          <input type="email" name="email" placeholder="Email" />
          <input type="password" name="password" placeholder="Password" />
          <a href="">Forgot your password?</a>
          <button onclick="logIn()">Sign In</button>
        </form>
      </div>
      <div class="overlay-container">
        <div class="overlay">
          <div class="overlay-panel overlay-left">
            <h1>Welcome Back!</h1>
            <p>
              To keep connected with us please login with your personal info
            </p>
            <button class="ghost" id="signIn">Sign In</button>
          </div>
          <div class="overlay-panel overlay-right">
            <h1>Hello, Friend!</h1>
            <p>Enter your personal details and start journey with us</p>
            <button class="ghost" id="signUp">Sign Up</button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
